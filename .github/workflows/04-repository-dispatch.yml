# 04 - REPOSITORY DISPATCH
# External API triggers for integration with webhooks, CI systems, ChatOps
# Trigger: POST to /repos/OWNER/REPO/dispatches with event_type and client_payload

name: 04 - Repository Dispatch

on:
  repository_dispatch:
    types: [custom-event, webhook-event]  # Filter by event_type

jobs:
  repository-dispatch-job:
    name: Repository Dispatch Job
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      # Access dispatch data: github.event.action, github.event.client_payload
      - name: Display event information
        run: |
          echo "Dispatch event type: ${{ github.event.action }}"
          echo "Event payload:"
          echo '${{ toJson(github.event.client_payload) }}'
          
      # CONDITIONAL - different logic per event type
      - name: Process custom event
        if: github.event.action == 'custom-event'
        run: echo "Processing custom event..."
          
      - name: Process webhook event
        if: github.event.action == 'webhook-event'
        run: echo "Processing webhook event..."
