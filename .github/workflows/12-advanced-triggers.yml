# 12 - ADVANCED TRIGGERS
# Branch/path/tag filters, activity types, combining multiple triggers
# Globs: 'main', 'feature/*' (one level), 'feature/**' (any depth), 'v*'

name: 12 - Advanced Triggers

on:
  push:
    branches: [main, 'feature/**', 'release/*']  # Glob patterns
    paths: ['src/**', '.github/workflows/**']    # Only on specific file changes
    tags: ['v*']                                 # Tag pushes (release automation)
      
  pull_request:
    types: [opened, synchronize, reopened, labeled]  # Activity types
    branches: [main]
    paths-ignore: ['docs/**', '*.md']  # Skip CI for docs-only changes
    
  issue_comment:
    types: [created]  # ChatOps trigger
    
  workflow_dispatch:  # Manual trigger for testing

jobs:
  trigger-info:
    name: Display Trigger Information
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      # GITHUB CONTEXT - info about the workflow run
      - name: Display event information
        run: |
          echo "Event: ${{ github.event_name }}"
          echo "Ref: ${{ github.ref }}"
          echo "SHA: ${{ github.sha }}"
          
      # CONDITIONAL BY EVENT TYPE
      - name: Push event details
        if: github.event_name == 'push'
        run: |
          echo "Branch/Tag: ${{ github.ref }}"
          echo "Pusher: ${{ github.actor }}"
          
      - name: Pull request event details
        if: github.event_name == 'pull_request'
        run: |
          echo "PR Number: ${{ github.event.pull_request.number }}"
          echo "PR Action: ${{ github.event.action }}"
          
      - name: Issue comment event details
        if: github.event_name == 'issue_comment'
        run: |
          echo "Comment: ${{ github.event.comment.body }}"
          echo "Commenter: ${{ github.event.comment.user.login }}"
          
      - name: Explain filters
        run: |
          echo "Filters: branches, paths, paths-ignore, tags, types"
