# 10 - COMPOSITE ACTIONS
# Bundle steps into reusable actions at .github/actions/<name>/action.yml
# Called at step level (vs reusable workflows at job level)

name: 10 - Composite Action

on:
  push:
    branches: [ main, copilot/** ]
  workflow_dispatch:

jobs:
  use-composite-action:
    name: Use Composite Action
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      # USE LOCAL COMPOSITE ACTION - path to directory with action.yml
      - name: Use custom composite action
        id: greet
        uses: ./.github/actions/greet-user
        with:
          username: 'Demo User'
          greeting: 'Welcome'
          
      # ACCESS OUTPUTS via steps.<step-id>.outputs.<output-name>
      - name: Display output from composite action
        run: echo "Output: ${{ steps.greet.outputs.message }}"
          
      # REUSE with different inputs
      - name: Use composite action with different inputs
        uses: ./.github/actions/greet-user
        with:
          username: 'Another User'
          greeting: 'Hi'
          
      - name: Composite action benefits
        run: |
          echo "Benefits: package steps, share logic, can publish to marketplace"
